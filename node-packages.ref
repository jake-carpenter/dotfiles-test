# #!/usr/bin/env bash

# # Hash the packages file to trigger a change here when there's a change there.
# # packages.yaml hash: {{ include ".chezmoidata/packages.yaml" | sha256sum }}

# source $HOME/.zprofile

# # Initialize packages array
# packages=()

# # Base profile
# {{ range .packages.npm.base }}
#   packages+=({{ . | quote }})
# {{ end }}

# # Desktop profile
# {{ if has .chezmoi.hostname .systems.desktop }}
#   {{ range .packages.npm.desktop }}
#     packages+=({{ . | quote }})
#   {{ end -}}
# {{ end }}

# # Personal profile
# {{ if has .chezmoi.hostname .systems.personal }}
#   {{ range .packages.npm.personal }}
#     packages+=({{ . | quote }})
#   {{ end -}}
# {{ end }}

# echo -e "\n🚀 Checking for missing NPM packages\n"

# missing_packages=()

# for package in "${packages[@]}"; do
#   if ! npm list "$package" -g --parseable 2>/dev/null | grep -q "$package"; then
#     echo "❌ $package"
#     missing_packages+=("$package")
#   else
#     echo "✅ $package"
#   fi
# done

# if [[ ${#missing_packages[@]} -gt 0 ]]; then
#   echo -e "\n🚀 Installing missing packages\n"
#   npm -g install "${missing_packages[@]}"
#   echo -e "\n🎉 All missing packages have been installed.\n"
# else
#   echo -e "\n👍 All packages are already installed.\n"
# fi
